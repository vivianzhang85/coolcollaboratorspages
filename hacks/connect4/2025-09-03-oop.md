---
layout: opencs
title: "Connect 4 OOP"
permalink: /connect4/lesson/oop
---

## Key OOP Concepts
	1.	Classes and Objects
	    •	A class is a blueprint (like a plan for a game piece).
	    •	An object is an instance of that class (like one red coin or one yellow coin).
	2.	Encapsulation
	    •	Bundling data and methods inside objects so they manage themselves.
	3.	Inheritance
	    •	One class can “inherit” from another, reusing behavior and extending it.
	4.	Polymorphism
	    •	Different objects can respond to the same method in different ways.

## Applying OOP to Connect 4

// Class for each player
class Player {
  constructor(name, color, coins = 21, time = 300) {
    this.name = name;
    this.color = color;
    this.coins = coins;
    this.time = time;
  }

  useCoin() {
    if (this.coins > 0) {
      this.coins--;
      return true;
    }
    return false;
  }
}

// Class for the board
class Board {
  constructor(rows = 6, cols = 7) {
    this.rows = rows;
    this.cols = cols;
    this.grid = Array.from({ length: rows }, () => Array(cols).fill(null));
  }

  dropCoin(col, player) {
    for (let r = this.rows - 1; r >= 0; r--) {
      if (!this.grid[r][col]) {
        this.grid[r][col] = player.color;
        return { row: r, col };
      }
    }
    return null; // column full
  }
}

// Class for the game controller
class Game {
  constructor(player1, player2, board) {
    this.players = [player1, player2];
    this.board = board;
    this.current = 0; // index of active player
  }

  get activePlayer() {
    return this.players[this.current];
  }

  switchTurn() {
    this.current = 1 - this.current;
  }

  playMove(col) {
    const player = this.activePlayer;
    if (!player.useCoin()) return "No coins left!";
    const move = this.board.dropCoin(col, player);
    if (!move) return "Column full!";
    // Check win conditions here...
    this.switchTurn();
  }
}

## Why OOP Helps
	•	Organization → Instead of one huge script, responsibilities are split:
	•	Player manages coins and time.
	•	Board manages slots and win-checking.
	•	Game manages turns and rules.
	•	Reusability → Want a different board size (e.g., 8x8)? Just change the Board constructor.


<svg width="800" height="1200" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="2" flood-opacity="0.3"/>
    </filter>
  </defs>
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#333">Connect 4 OOP Game Loop Flowchart</text>
  <!-- Legend -->
  <rect x="20" y="50" width="180" height="110" fill="#F5F5F5" stroke="#ccc" stroke-width="1" rx="5"/>
  <text x="110" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">OOP Concepts:</text>
  <rect x="30" y="80" width="15" height="10" fill="#E1F5FE" stroke="#01579B"/>
  <text x="50" y="88" font-family="Arial, sans-serif" font-size="10" fill="#333">:wrench: Classes & Objects</text>
  <rect x="30" y="95" width="15" height="10" fill="#F3E5F5" stroke="#4A148C"/>
  <text x="50" y="103" font-family="Arial, sans-serif" font-size="10" fill="#333">:pill: Encapsulation</text>
  <rect x="30" y="110" width="15" height="10" fill="#FFF3E0" stroke="#E65100"/>
  <text x="50" y="118" font-family="Arial, sans-serif" font-size="10" fill="#333">:performing_arts: Polymorphism</text>
  <rect x="30" y="125" width="15" height="10" fill="#E8F5E8" stroke="#2E7D32"/>
  <text x="50" y="133" font-family="Arial, sans-serif" font-size="10" fill="#333">:dna: Inheritance</text>
  <text x="30" y="150" font-family="Arial, sans-serif" font-size="9" fill="#666">(Potential for extension)</text>
  <!-- Start -->
  <ellipse cx="400" cy="200" rx="50" ry="25" fill="#4CAF50" stroke="#2E7D32" stroke-width="2" filter="url(#shadow)"/>
  <text x="400" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Start Game</text>
  <!-- Create Player Objects -->
  <rect x="300" y="250" width="200" height="60" fill="#E1F5FE" stroke="#01579B" stroke-width="2" rx="10" filter="url(#shadow)"/>
  <text x="400" y="270" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#01579B">Create Player Objects</text>
  <text x="400" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#01579B">:wrench: Classes & Objects</text>
  <text x="400" y="298" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#01579B">:pill: Encapsulation</text>
  <!-- Create Board Object -->
  <rect x="300" y="340" width="200" height="60" fill="#E1F5FE" stroke="#01579B" stroke-width="2" rx="10" filter="url(#shadow)"/>
  <text x="400" y="360" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#01579B">Create Board Object</text>
  <text x="400" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#01579B">:wrench: Classes & Objects</text>
  <text x="400" y="388" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#01579B">:pill: Encapsulation</text>
  <!-- Create Game Controller -->
  <rect x="300" y="430" width="200" height="60" fill="#E1F5FE" stroke="#01579B" stroke-width="2" rx="10" filter="url(#shadow)"/>
  <text x="400" y="450" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#01579B">Create Game Controller</text>
  <text x="400" y="465" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#01579B">:wrench: Classes & Objects</text>
  <text x="400" y="478" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#01579B">:pill: Encapsulation</text>
  <!-- Get Active Player -->
  <rect x="300" y="520" width="200" height="60" fill="#F3E5F5" stroke="#4A148C" stroke-width="2" rx="10" filter="url(#shadow)"/>
  <text x="400" y="540" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#4A148C">Game.getActivePlayer()</text>
  <text x="400" y="555" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#4A148C">:pill: Encapsulation</text>
  <text x="400" y="568" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#4A148C">Data access through methods</text>
  <!-- Player Input -->
  <rect x="300" y="610" width="200" height="40" fill="#FFF9C4" stroke="#F57F17" stroke-width="2" rx="10" filter="url(#shadow)"/>
  <text x="400" y="635" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#F57F17">Player Input: Choose Column</text>
  <!-- Play Move -->
  <rect x="300" y="680" width="200" height="60" fill="#F3E5F5" stroke="#4A148C" stroke-width="2" rx="10" filter="url(#shadow)"/>
  <text x="400" y="700" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#4A148C">Game.playMove(column)</text>
  <text x="400" y="715" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#4A148C">:pill: Encapsulation</text>
  <text x="400" y="728" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#4A148C">Game manages the flow</text>
  <!-- Use Coin -->
  <rect x="300" y="770" width="200" height="60" fill="#F3E5F5" stroke="#4A148C" stroke-width="2" rx="10" filter="url(#shadow)"/>
  <text x="400" y="790" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#4A148C">ActivePlayer.useCoin()</text>
  <text x="400" y="805" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#4A148C">:pill: Encapsulation</text>
  <text x="400" y="818" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#4A148C">Player manages own coins</text>
  <!-- Has Coins Decision -->
  <polygon points="400,860 450,890 400,920 350,890" fill="#FFECB3" stroke="#FF8F00" stroke-width="2" filter="url(#shadow)"/>
  <text x="400" y="885" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#FF8F00">Player has</text>
  <text x="400" y="898" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#FF8F00">coins left?</text>
  <!-- No Coins Left -->
  <rect x="100" y="860" width="150" height="60" fill="#FFF3E0" stroke="#E65100" stroke-width="2" rx="10" filter="url(#shadow)"/>
  <text x="175" y="880" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#E65100">Return "No coins left!"</text>
  <text x="175" y="895" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#E65100">:performing_arts: Polymorphism</text>
  <text x="175" y="908" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#E65100">Different return types</text>
  <!-- Decrement Coins -->
  <rect x="550" y="860" width="150" height="60" fill="#F3E5F5" stroke="#4A148C" stroke-width="2" rx="10" filter="url(#shadow)"/>
  <text x="625" y="880" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#4A148C">Player.coins--</text>
  <text x="625" y="895" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#4A148C">:pill: Encapsulation</text>
  <text x="625" y="908" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#4A148C">Internal state change</text>
  <!-- Drop Coin -->
  <rect x="550" y="950" width="150" height="60" fill="#F3E5F5" stroke="#4A148C" stroke-width="2" rx="10" filter="url(#shadow)"/>
  <text x="625" y="970" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#4A148C">Board.dropCoin(col, player)</text>
  <text x="625" y="985" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#4A148C">:pill: Encapsulation</text>
  <text x="625" y="998" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#4A148C">Board manages grid</text>
  <!-- Column Available Decision -->
  <polygon points="625,1040 675,1070 625,1100 575,1070" fill="#FFECB3" stroke="#FF8F00" stroke-width="2" filter="url(#shadow)"/>
  <text x="625" y="1065" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#FF8F00">Column</text>
  <text x="625" y="1078" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#FF8F00">available?</text>
  <!-- Column Full -->
  <rect x="300" y="1040" width="150" height="60" fill="#FFF3E0" stroke="#E65100" stroke-width="2" rx="10" filter="url(#shadow)"/>
  <text x="375" y="1060" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#E65100">Return "Column full!"</text>
  <text x="375" y="1075" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#E65100">:performing_arts: Polymorphism</text>
  <text x="375" y="1088" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#E65100">Different return types</text>
  <!-- Update Grid -->
  <rect x="550" y="1130" width="150" height="60" fill="#F3E5F5" stroke="#4A148C" stroke-width="2" rx="10" filter="url(#shadow)"/>
  <text x="625" y="1150" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#4A148C">Update Board.grid</text>
  <text x="625" y="1165" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#4A148C">:pill: Encapsulation</text>
  <text x="625" y="1178" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#4A148C">Internal grid management</text>
10:20
<!-- Game Over (No Coins) -->
  <ellipse cx="175" cy="1000" rx="75" ry="25" fill="#F44336" stroke="#C62828" stroke-width="2" filter="url(#shadow)"/>
  <text x="175" y="995" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">Game Over</text>
  <text x="175" y="1008" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">Current Player Loses</text>
  <!-- End -->
  <ellipse cx="175" cy="1100" rx="30" ry="20" fill="#607D8B" stroke="#37474F" stroke-width="2" filter="url(#shadow)"/>
  <text x="175" y="1105" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">End</text>
  <!-- Arrows -->
  <!-- Start to Create Players -->
  <line x1="400" y1="225" x2="400" y2="245" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- Create Players to Create Board -->
  <line x1="400" y1="310" x2="400" y2="335" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- Create Board to Create Game -->
  <line x1="400" y1="400" x2="400" y2="425" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- Create Game to Get Active Player -->
  <line x1="400" y1="490" x2="400" y2="515" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- Get Active Player to Player Input -->
  <line x1="400" y1="580" x2="400" y2="605" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- Player Input to Play Move -->
  <line x1="400" y1="650" x2="400" y2="675" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- Play Move to Use Coin -->
  <line x1="400" y1="740" x2="400" y2="765" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- Use Coin to Has Coins Decision -->
  <line x1="400" y1="830" x2="400" y2="855" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- Has Coins Decision to No Coins (No) -->
  <line x1="350" y1="890" x2="255" y2="890" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="300" y="885" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#333">No</text>
  <!-- Has Coins Decision to Decrement Coins (Yes) -->
  <line x1="450" y1="890" x2="545" y2="890" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="500" y="885" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#333">Yes</text>
  <!-- Decrement Coins to Drop Coin -->
  <line x1="625" y1="920" x2="625" y2="945" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- Drop Coin to Column Available Decision -->
  <line x1="625" y1="1010" x2="625" y2="1035" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- Column Available Decision to Column Full (No) -->
  <line x1="575" y1="1070" x2="455" y2="1070" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="515" y="1065" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#333">No</text>
  <!-- Column Available Decision to Update Grid (Yes) -->
  <line x1="625" y1="1100" x2="625" y2="1125" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="635" y="1115" font-family="Arial, sans-serif" font-size="9" fill="#333">Yes</text>
  <!-- No Coins to Game Over -->
  <line x1="175" y1="920" x2="175" y2="970" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- Column Full loops back to Get Active Player -->
  <path d="M 300 1070 L 200 1070 L 200 550 L 295 550" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <!-- Game Over to End -->
  <line x1="175" y1="1025" x2="175" y2="1075" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- Update Grid loops back to Get Active Player (simplified for space) -->
  <path d="M 700 1160 L 750 1160 L 750 550 L 505 550" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="720" y="1155" font-family="Arial, sans-serif" font-size="9" fill="#333">Check win, switch turn</text>
</svg>