// =======================
// :art: Theme Variables
// =======================
$bg-0: #000;
$bg-1: #1F2020;
$bg-2: #1F1F1F;
$bg-3: #2A2D2D;
$panel: #2B2B2B;
$surface: #333;
$text: #F0F0F0;
$text-muted: #aaa;
$accent: #4CAFEF;
$accent-700: #007ACC;
$accent-700-hover: #005FA3;
$green: #4ADE80;
$green-bg: #2D5A3D;
$warn: #FBBF24;
$warn-bg: #5A3D2D;
$popup-bg: #222;
$teal: #38B2AC;
$orange: #ED8936;
$blue: #3182CE;
$red: #E53E3E;
$success-green: #28A745;
// Breakpoints
$bp-md: 768px;
// =======================
// :jigsaw: Mixins
// =======================
@mixin sticky($top: 1rem) {
  position: sticky;
  top: $top;
}
@mixin scroll-y {
  max-height: calc(100vh - 2rem);
  overflow-y: auto;
}
@mixin btn-base {
  display: inline-block;
  color: white;
  padding: 15px 25px;
  border-radius: 4px;
  text-decoration: none;
  margin: 0.5rem 0.25rem;
  border: none;
  cursor: pointer;
  font-family: arial;
  font-weight: bolder;
}
@mixin info-box($color) {
  padding: 20px;
  margin: 20px 0;
  border-radius: 0 8px 8px 0;
  border-left: 4px solid $color;
}
// =======================
// :package: Layout
// =======================
.lesson-container {
  display: flex;
  gap: 2rem;
  flex-wrap: wrap; // allows sidebar + content to wrap on narrow screens
  align-items: flex-start;
  padding: 1rem;
  @media (max-width: $bp-md) {
    flex-direction: column; // stack sidebar above content
  }
}
/* Sidebar */
.lesson-sidebar {
  flex: 0 0 250px; // fixed width
  max-width: 100%;
  background: $bg-1;
  padding: 1rem;
  border-radius: 8px;
  @include sticky(1rem);
  @include scroll-y;
  @media (max-width: $bp-md) {
    position: relative; // no longer sticky
    top: auto;
    max-height: none;
    overflow: visible;
    width: 100%;
  }
}
/* Main content */
.lesson-content {
  flex: 1 1 0;
  min-width: 300px; // prevents collapsing
}
// =======================
// :stopwatch: Time Tracker
// =======================
.time-display {
  background: $bg-3;
  padding: 0.5rem;
  margin: 0.25rem 0;
  border-radius: 4px;
  text-align: center;
  span {
    font-size: 1.2rem;
    font-weight: bold;
    color: $accent;
    display: block;
  }
  small {
    font-size: 0.75rem;
    color: $text-muted;
  }
}
.timer-status {
  text-align: center;
  padding: 0.25rem;
  border-radius: 4px;
  font-size: 0.8rem;
  font-weight: bold;
  margin-top: 0.5rem;
  &.active {
    background: $green-bg;
    color: $green;
  }
  &.paused {
    background: $warn-bg;
    color: $warn;
  }
}
// =======================
// :bar_chart: Progress Bar
// =======================
.progress-bar {
  background: $surface;
  border-radius: 6px;
  height: 12px;
  width: 100%;
  margin: 0.5rem 0;
  .progress-fill {
    background: $accent;
    height: 100%;
    width: 0%;
    border-radius: 6px;
  }
}
// =======================
// :radio_button: Buttons
// =======================
.btn {
  @include btn-base;
  background: $accent-700;
  &:hover {
    background: $accent-700-hover;
    border-radius: 25px;
    transition: border-radius 2s;
  }
}
.small-btn {
  font-size: 0.75rem;
  padding: 3px 6px;
  margin-top: 0.5rem;
}
// =======================
// :test_tube: Sandbox & Blocks
// =======================
.sandbox {
  textarea {
    width: 100%;
    height: 120px;
    font-family: monospace;
    margin-bottom: 0.5rem;
  }
}
.resources,
.sandbox,
.lesson-quiz {
  background: $panel;
  padding: 1rem;
  border-radius: 8px;
  margin: 1rem 0;
  color: $text;
}
// =======================
// :sports_medal: Badges
// =======================
#badges {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}
.badge {
  background: $surface;
  color: #fff;
  padding: 6px 10px;
  border-radius: 20px;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  gap: 5px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}
// =======================
// :tada: Congrats Popup
// =======================
.congrats-popup {
  position: fixed;
  top: 20px;
  right: -300px;
  background: $popup-bg;
  color: #fff;
  padding: 12px 18px;
  border-radius: 8px;
  font-weight: bold;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  transition: right 0.3s ease, opacity 0.3s ease;
  opacity: 0.95;
  z-index: 9999;
  &.show {
    right: 20px;
  }
}
// =======================
// :memo: Quick Check / Reflection
// =======================
.lesson-quiz {
  textarea {
    width: 100%;
    min-height: 120px; // makes it comfortably tall
    padding: 10px;
    border-radius: 6px;
    border: 1px solid #444;
    font-size: 1rem;
    resize: vertical; // allows user to drag to resize
    box-sizing: border-box;
    background: $bg-2;
    color: $text;
  }
  button:hover {
    background: lighten($accent-700, 15%); // #379BD8 equivalent vibe
  }
  #reflection-status {
    margin-top: 0.5rem;
    font-size: 0.85rem;
    font-style: italic;
    color: #9ACDFF; // subtle highlight color
  }
}
// =======================
// :wood: Blackboard
// =======================
.blackboard {
  width: 100%;
  min-height: 240px;
}
#blackboard-canvas {
  // min-height: 480px;
  border: 1px solid #ccc;
  background: $bg-0;
  cursor: crosshair;
}
.blackboard-description {
  margin-top: 10px;
  color: #ccc;
}
// =======================
// :test_tube: Demo
// =======================
.demo-label {
  display: block;
  text-align: center;
  margin: 6px 0;
}
#demo-canvas-wrapper {
  background: white;
  border: 2px solid #333;
  display: block;
  margin: 0 auto;
}
#demo-code {
  display: none;
  margin: 8px auto;
  overflow: auto;
}
// =======================
// :information_source: Info Boxes
// =======================
.info-box { @include info-box($blue); } // default style if used solo
.challenge-box { @include info-box($teal); }
.think-box { @include info-box($orange); }
.checkpoint-box,
.key-points { @include info-box($blue); }
.warning-box { @include info-box($red); }
.success { @include info-box($success-green); }
// =======================
// :safety_pin: Flashcards
// =======================
.flashcards-section {
  background: $panel !important;
  padding: 1rem !important;
  border-radius: 8px !important;
  margin: 1rem 0 2rem 0 !important;  // Added bottom margin
  color: $text !important;
  max-width: 100% !important;        // Prevent overflow
  box-sizing: border-box !important; // Include padding in width
}
.flashcard-container {
  position: relative !important;
  width: 100% !important;
  max-width: 280px !important;  // Even smaller
  height: 140px !important;     // Even shorter
  perspective: 1500px !important;
  margin: 1rem auto 1.5rem auto !important; // Added bottom margin
  display: block !important;
  &.hidden {
    display: none !important;
  }
}
.flashcard-inner {
  position: relative !important;
  width: 100% !important;
  height: 100% !important;
  transition: transform 0.6s ease !important;
  transform-style: preserve-3d !important;
  box-shadow: 0 8px 25px rgba(0,0,0,0.3) !important;
  border-radius: 12px !important;
  &.flipped { transform: rotateY(180deg) !important; }
}
.flashcard-front,
.flashcard-back {
  position: absolute !important;
  width: 100% !important;
  height: 100% !important;
  backface-visibility: hidden !important;
  display: flex !important;
  flex-direction: column !important;
  justify-content: center !important;
  align-items: center !important;
  padding: 12px !important;      // Reduced from 20px
  border-radius: 8px !important; // Reduced from 12px
  background: #1E293B !important;
  color: #F8FAFC !important;
  border: 1px solid rgba(255,255,255,0.15) !important;
}
.flashcard-back { transform: rotateY(180deg) !important; }
.card-counter {
  position: absolute !important;
  top: 12px !important;
  right: 12px !important;
  background: rgba(255,255,255,0.15) !important;
  border-radius: 15px !important;
  padding: 4px 10px !important;
  font-size: 0.8rem !important;
}
.flashcard-front h3,
.flashcard-back h4 {
  text-align: center !important;
  margin-bottom: 1rem !important;
  color: white !important;
}
.flashcard-back p {
  text-align: center !important;
  margin-bottom: 1rem !important;
  color: white !important;
}
.flashcard-controls {
  display: flex !important;
  flex-wrap: wrap !important;
  justify-content: center !important;
  align-items: center !important;
  margin: 1rem 0 1.5rem 0 !important; // Added bottom margin
  gap: 0.4rem !important;
  max-width: 100% !important;
  
  button {
    flex: 0 1 auto !important;     // Don't grow, allow shrink
    min-width: 60px !important;
    max-width: 100px !important;   // Smaller max width
    padding: 6px 10px !important;
    font-size: 0.75rem !important;
    border-radius: 4px !important;
    border: none !important;
    cursor: pointer !important;
    white-space: nowrap !important; // Prevent text wrapping
  }
}
.flashcard-actions {
  display: flex !important;
  gap: 0.5rem !important;
  flex: 1 !important;
  
  .know-btn, .review-btn {
    flex: 1 !important;
    min-width: 60px !important;
    font-size: 0.75rem !important;
    padding: 6px 10px !important;
  }
  
  .know-btn {
    background: #10B981 !important;
    color: white !important;
  }
  
  .review-btn {
    background: #F59E0B !important;
    color: white !important;
  }
}
.card-status {
  margin-top: 12px !important;
  font-size: 0.85rem !important;
  color: #CBD5E1 !important;
  text-align: center !important;
}
#flashcard-review-sidebar {
  button {
    width: 100%;
    background: #334155;
    border: none;
    color: white;
    padding: 8px;
    border-radius: 6px;
    cursor: pointer;
    margin-bottom: 5px;
    font-size: 0.85rem;
    &:hover { background: #475569; }
  }
}

.flashcard-front h3,
.flashcard-back h4 {
  text-align: center !important;
  margin-bottom: 0.5rem !important; // Reduced from 1rem
  color: white !important;
  font-size: 1rem !important;       // Smaller text
}

.flashcard-back p {
  text-align: center !important;
  margin-bottom: 0.5rem !important; // Reduced from 1rem
  color: white !important;
  font-size: 0.9rem !important;     // Smaller text
}

.flashcard-front .btn,
.flashcard-back .btn {
  padding: 6px 12px !important;     // Smaller flip button
  font-size: 0.8rem !important;
}

.flashcard-deck {
  width: 100% !important;
  max-width: 100% !important;
  overflow: hidden !important; // Prevent any overflow
}