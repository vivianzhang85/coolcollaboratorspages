---
title: Vega Graph
layout: post
description: A first attempt at Vega
permalink: /vega
---

## Charting in Canvas or SVG

Vega Visualization [link](https://vega.github.io/vega/)

- Built on D3 (Data-driven documents) under the hood, but abstracted into a declarative grammar.  
- Can render to Canvas or SVG.  
- Because of Canvas support, Vega fits naturally in real-time/dynamic contexts like game engines or simulations.  
- Feels more like a data-driven graphics engine than just “charting.”

<div id="bar"></div>
<div id="line"></div>
<div id="point"></div>
<script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
<script>
  function renderChart(dataList, markType="bar", withPoints=false) {
    const baseEncoding = {
      x: { field: "category", type: "ordinal" },
      y: { field: "value", type: "quantitative" }
    };
    const vlSpec = { $schema: "https://vega.github.io/schema/vega-lite/v5.json",
      description: "Dynamic chart with optional points",
      width: 600,
      height: 400,
      autosize: { type: "fit", contains: "padding" },
      data: { values: dataList },
      layer: withPoints
        ? [
            { mark: markType, encoding: baseEncoding },
            { mark: { type: "point", filled: true, color: "red" }, encoding: baseEncoding }
          ]
        : [
            { mark: markType, encoding: baseEncoding }
          ]
    };
    vegaEmbed(`#${markType}`, vlSpec, { actions: false });
  }
  // Example data (could come from API)
  const sampleData = [
    { category: "A", value: 32 },
    { category: "B", value: 55 },
    { category: "C", value: 49 },
    { category: "D", value: 38 },
    { category: "F", value: 50 },
    { category: "G", value: 58 },
  ];
  // Try different charts:
  // Params: sampleData, chart type and container name, layer chart with points
  renderChart(sampleData, "bar");           // bars only
  renderChart(sampleData, "line", true);    // line + red points
  renderChart(sampleData, "point", true);   // just red points
</script>
